#!/bin/bash
# iZsh 欢迎界面对齐测试

echo "🧪 测试 iZsh 欢迎界面对齐"
echo ""

cat << 'WELCOME'
┌───────────────────────────────────────────────────────────┐
│                                                           │
│    ██╗███████╗███████╗██╗  ██╗                          │
│    ██║╚══███╔╝██╔════╝██║  ██║                          │
│    ██║  ███╔╝ ███████╗███████║                          │
│    ██║ ███╔╝  ╚════██║██╔══██║                          │
│    ██║███████╗███████║██║  ██║                          │
│    ╚═╝╚══════╝╚══════╝╚═╝  ╚═╝                          │
│                                                           │
│            智能终端 - AI 驱动的 Shell                     │
│                                                           │
└───────────────────────────────────────────────────────────┘
WELCOME

echo ""
echo "✨ 如果右侧的 │ 和 ┘ 对齐，说明显示正常"
echo ""

# 字符宽度分析
python3 << 'EOF'
print("📊 字符宽度分析:")
print("")

lines = [
    "┌───────────────────────────────────────────────────────────┐",
    "│                                                           │",
    "│            智能终端 - AI 驱动的 Shell                     │",
    "└───────────────────────────────────────────────────────────┘"
]

for i, line in enumerate(lines, 1):
    char_count = len(line)
    # 简单的宽度估算（实际终端可能不同）
    display_width = sum(2 if ord(c) > 127 and ord(c) < 0x2500 or ord(c) > 0x257F else 1 for c in line)
    print(f"第{i}行: {char_count}个字符")

print("")
print("注意: box drawing字符(┌│└等)通常显示为单宽字符")
print("      中文字符通常显示为双宽字符")
print("      实际显示效果取决于终端和字体设置")
EOF

echo ""
echo "💡 如果对齐有问题，可能原因："
echo "   1. 终端字体不支持等宽box drawing字符"
echo "   2. 终端配置的字体不是等宽字体"
echo "   3. 中文字符和英文字符宽度不一致"
echo ""
echo "🔧 建议："
echo "   - 使用等宽字体（如 Monaco, Menlo, Courier New）"
echo "   - 确保中文字体也是等宽的"
echo "   - 调整终端字体大小以获得最佳效果"
