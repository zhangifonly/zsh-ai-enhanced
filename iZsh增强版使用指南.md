# iZsh 增强版使用指南

## 🎉 欢迎使用 iZsh 增强版！

### ✨ 新增功能

#### 1. 浮动控制面板
- 📊 始终可用的控制面板
- 🎯 快速访问常用功能
- ⚡ 一键操作

#### 2. 菜单栏图标
- 🔔 菜单栏显示 ⚡ 图标
- 📱 快速访问菜单
- 🎨 轻量级后台运行

#### 3. 快捷键系统
- ⌘N - 新建 iZsh 窗口
- ⌘K - 清屏
- ⌘, - 打开设置文件
- ⌘? - 显示帮助

---

## 🚀 启动方式

### 方法 1: 桌面快捷方式（最快）
双击桌面的 **启动iZsh.command**

### 方法 2: 应用程序文件夹
双击 `~/Applications/iZsh.app`

### 方法 3: Spotlight
⌘ + 空格 → 输入 "iZsh" → 回车

### 方法 4: 仅启动控制面板
双击 `~/Applications/iZshControl.app`

---

## ⚡ 控制面板使用

### 启动后自动显示
- iZsh 主应用启动时会自动打开控制面板
- 控制面板会浮动在所有窗口之上
- 菜单栏会显示 ⚡ 图标

### 控制面板按钮

**新窗口 ⌘N**
- 创建新的 iZsh 终端窗口
- 每个窗口都是独立的 shell 会话

**清屏 ⌘K**
- 清除当前终端屏幕
- 等同于执行 `clear` 命令

**设置 ⌘,**
- 直接打开 `~/.izshrc` 配置文件
- 使用默认文本编辑器编辑

**帮助 ⌘?**
- 显示帮助信息
- 打开使用文档

### 菜单栏图标功能

点击菜单栏的 ⚡ 图标：

- **显示控制面板** - 重新显示被隐藏的控制面板
- **新建 iZsh 窗口** - 快速创建新窗口
- **偏好设置** - 打开配置文件
- **关于 iZsh** - 显示版本信息
- **退出控制面板** - 关闭控制面板（不影响已打开的终端）

---

## 🎯 功能特点

### 1. 完全独立
- ✅ 不依赖系统 zsh 配置
- ✅ 独立的配置文件 `~/.izshrc`
- ✅ 独立的历史记录 `~/.izsh_history`

### 2. AI 智能翻译
- ✅ 输入自然语言自动翻译
- ✅ 拼写错误自动修正
- ✅ 用户确认机制

### 3. 增强的控制
- ✅ 浮动控制面板
- ✅ 菜单栏快速访问
- ✅ 完整的快捷键支持

### 4. 美观界面
- ✅ AI 主题图标
- ✅ 精美启动画面
- ✅ 现代化 UI

---

## ⚙️ 配置

### 主配置文件
位置：`~/.izshrc`

```bash
# AI 功能配置
export IZSH_AI_ENABLED=1
export IZSH_AI_API_URL="https://q.quuvv.cn/v1"
export IZSH_AI_API_KEY="你的密钥"
export IZSH_AI_MODEL="claude-3-5-haiku-20241022"
export IZSH_AI_API_TYPE="anthropic"
export IZSH_AI_INTERVENTION_LEVEL="suggest"

# 调试模式（需要时启用）
# export IZSH_AI_DEBUG=1
```

### 环境变量
- `IZSH_AI_ENABLED` - AI 功能开关
- `IZSH_AI_DEBUG` - 调试模式
- `IZSH_AI_INTERVENTION_LEVEL` - 干预级别（suggest/auto）

---

## 🔧 高级功能

### 自动启动控制面板
安装时可选择开机自启动：
```bash
~/Library/LaunchAgents/com.izsh.control.plist
```

手动启用：
```bash
launchctl load ~/Library/LaunchAgents/com.izsh.control.plist
```

手动禁用：
```bash
launchctl unload ~/Library/LaunchAgents/com.izsh.control.plist
```

### 多窗口管理
- 使用 ⌘N 创建多个独立窗口
- 每个窗口都是独立的 shell 会话
- 窗口间互不干扰

### 快捷键自定义
可以通过 macOS 系统偏好设置添加更多快捷键：
1. 系统偏好设置 → 键盘 → 快捷键
2. 应用快捷键 → 添加
3. 选择 Terminal.app
4. 添加自定义快捷键

---

## 🐛 故障排查

### 问题 1: 控制面板不显示
**解决方法**：
```bash
# 手动启动控制面板
open -a ~/Applications/iZshControl.app
```

### 问题 2: 菜单栏图标不显示
**原因**：控制面板未运行

**解决方法**：
```bash
killall iZshControl
open -a ~/Applications/iZshControl.app
```

### 问题 3: 快捷键不工作
**检查**：
- 确保 Terminal.app 是活动窗口
- 检查系统快捷键是否冲突

### 问题 4: AI 功能不工作
**检查配置**：
```bash
~/.local/bin/izsh -c 'echo $IZSH_AI_ENABLED'
~/.local/bin/izsh -c 'zmodload -e zsh/ai && echo "OK" || echo "Failed"'
```

---

## 📚 使用技巧

### 1. 快速清屏
- 使用控制面板的「清屏」按钮
- 或按 ⌘K
- 或输入 `clear`

### 2. 快速新窗口
- 点击控制面板「新窗口」
- 或按 ⌘N
- 或点击菜单栏图标

### 3. 快速编辑配置
- 点击控制面板「设置」
- 或按 ⌘,
- 或直接编辑 `~/.izshrc`

### 4. AI 翻译示例
```bash
# 输入中文
列目录          # → ls
查看文件        # → cat
显示当前目录    # → pwd
创建目录 test   # → mkdir test
删除文件 file   # → rm file
查找大文件      # → find . -size +100M
```

---

## 🎨 界面说明

### 启动画面
```
╔═══════════════════════════════════════════════════════════╗
║                                                           ║
║    ██╗███████╗███████╗██╗  ██╗                          ║
║    ██║╚══███╔╝██╔════╝██║  ██║                          ║
║    ██║  ███╔╝ ███████╗███████║                          ║
║    ██║ ███╔╝  ╚════██║██╔══██║                          ║
║    ██║███████╗███████║██║  ██║                          ║
║    ╚═╝╚══════╝╚══════╝╚═╝  ╚═╝                          ║
║                                                           ║
║            智能终端 - AI 驱动的 Shell                      ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝

⚡ 正在启动 iZsh...
💡 提示: 使用菜单栏的 ⚡ 图标访问控制面板
```

### 控制面板界面
```
┌─────────────────────────────────────────┐
│ iZsh - 智能终端控制面板                   │
├─────────────────────────────────────────┤
│                                          │
│  [新窗口 ⌘N] [清屏 ⌘K] [设置 ⌘,] [帮助 ⌘?] │
│                                          │
└─────────────────────────────────────────┘
```

---

## 🎊 总结

iZsh 增强版提供了：
- ✅ 浮动控制面板
- ✅ 菜单栏快速访问
- ✅ 完整的快捷键系统
- ✅ AI 智能翻译
- ✅ 美观的界面
- ✅ 完全独立的配置

享受您的智能终端体验！ 🚀

---

**版本**: 1.0.0 Enhanced
**更新日期**: 2025-11-10
**状态**: 生产就绪 ✅
