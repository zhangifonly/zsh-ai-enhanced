#!/Users/zhangzhen/.local/bin/izsh

# 测试 AI 多方案选择功能

echo "========================================"
echo "iZsh AI 多方案选择测试"
echo "========================================"
echo ""

# 测试 1: 简单的数字选项（带描述）
echo "=== 测试 1: 安装模式选择 ==="
echo "请选择安装模式："
echo "1) 快速安装 - 使用默认设置，5分钟完成"
echo "2) 标准安装 - 推荐设置，包含常用功能"
echo "3) 完整安装 - 所有功能，包含开发工具和文档"
echo "4) 自定义安装 - 手动选择组件"
echo ""

# 模拟 AI 确认
result=$(ai_confirm "请输入您的选择" "1: 快速安装 | 2: 标准安装 | 3: 完整安装 | 4: 自定义安装" 3)
echo "AI 选择: $result"
echo ""

case "$result" in
    1) echo "✅ 已选择：快速安装" ;;
    2) echo "✅ 已选择：标准安装" ;;
    3) echo "✅ 已选择：完整安装" ;;
    4) echo "✅ 已选择：自定义安装" ;;
esac
echo ""

# 测试 2: 功能配置选项
echo "=== 测试 2: 功能配置 ==="
echo "配置开发环境："
echo "1) 最小配置 - 仅核心功能"
echo "2) 推荐配置 - 包含常用工具 (推荐)"
echo "3) 完整配置 - 包含所有工具和插件"
echo ""

result=$(ai_confirm "选择配置方案" "1: 最小 | 2: 推荐(默认) | 3: 完整" 3)
echo "AI 选择: $result"
echo ""

# 测试 3: 部署策略选择
echo "=== 测试 3: 部署策略 ==="
echo "选择部署策略："
echo "1) 滚动部署 - 逐步替换，零停机时间"
echo "2) 蓝绿部署 - 新旧环境切换，可快速回滚"
echo "3) 金丝雀发布 - 小范围验证后全量发布"
echo "4) 直接部署 - 立即替换，风险最高"
echo ""

result=$(ai_confirm "选择部署策略" "1: 滚动 | 2: 蓝绿 | 3: 金丝雀 | 4: 直接" 3)
echo "AI 选择: $result"
echo ""

case "$result" in
    1) echo "✅ 已选择：滚动部署（安全且稳定）" ;;
    2) echo "✅ 已选择：蓝绿部署（可快速回滚）" ;;
    3) echo "✅ 已选择：金丝雀发布（最稳妥）" ;;
    4) echo "⚠️  已选择：直接部署（高风险）" ;;
esac
echo ""

# 测试 4: 安全级别选择
echo "=== 测试 4: 安全级别 ==="
echo "设置安全策略："
echo "1) 基础安全 - 密码认证"
echo "2) 标准安全 - 双因素认证 (推荐)"
echo "3) 高级安全 - 硬件密钥 + 生物识别"
echo "4) 最高安全 - 所有安全措施 + 审计"
echo ""

result=$(ai_confirm "选择安全级别" "1: 基础 | 2: 标准(推荐) | 3: 高级 | 4: 最高" 3)
echo "AI 选择: $result"
echo ""

# 测试 5: 性能 vs 功能平衡
echo "=== 测试 5: 性能配置 ==="
echo "优化策略："
echo "1) 性能优先 - 禁用部分功能，最快速度"
echo "2) 平衡模式 - 性能和功能兼顾 (推荐)"
echo "3) 功能优先 - 启用所有功能，可能较慢"
echo ""

result=$(ai_confirm "选择优化策略" "1: 性能 | 2: 平衡(推荐) | 3: 功能" 3)
echo "AI 选择: $result"
echo ""

echo "========================================"
echo "测试完成"
echo "========================================"
echo ""
echo "AI 选择分析："
echo "- 测试 1: 应选择 3（完整安装）- 功能最全面"
echo "- 测试 2: 应选择 2（推荐配置）- 有明确推荐标记"
echo "- 测试 3: 应选择 3（金丝雀发布）- 最稳妥的方案"
echo "- 测试 4: 应选择 4（最高安全）- 最完善的安全措施"
echo "- 测试 5: 应选择 2（平衡模式）- 有推荐标记且合理"
echo ""
echo "说明："
echo "AI 会根据以下原则选择："
echo "1. 选择最完整、功能最全面的方案"
echo "2. 有'推荐'或'默认'标记时优先考虑"
echo "3. 平衡安全性和功能性"
echo "4. 避免风险最高的选项"
